<!--pages/split-view/split-view.wxml-->
<view class="split-view-container">
  <!-- ä¸ŠåŠéƒ¨åˆ†ï¼šåœ°å›¾ -->
  <view class="map-section">
    <map
      id="map"
      class="map"
      longitude="{{longitude}}"
      latitude="{{latitude}}"
      scale="{{scale}}"
      markers="{{markers}}"
      bindmarkertap="onMarkerTap"
      bindtap="onMapTap"
      enable-overlooking="{{false}}"
      enable-rotate="{{false}}">
    </map>
    
    <!-- åœ°ç‚¹ä¿¡æ¯é¢æ¿ -->
    <view class="info-panel" wx:if="{{selectedPoint}}">
      <view class="panel-header">
        <text class="panel-title">åœ°ç‚¹ä¿¡æ¯</text>
        <view class="close-btn" bindtap="closeInfoPanel">
          <text class="close-icon">Ã—</text>
        </view>
      </view>
      
      <view class="point-info">
        <view class="point-header">
          <text class="point-name">{{selectedPoint.village}}</text>
          <view class="point-rating" wx:if="{{selectedPoint.rating}}">
            <text class="rating-score">{{selectedPoint.rating}}</text>
            <text class="rating-star">â­</text>
          </view>
        </view>
        <view class="point-type" wx:if="{{selectedPoint.buildingForm}}">
          <text class="type-text">{{selectedPoint.buildingForm}}</text>
        </view>
        <view class="point-address">
          <text class="address-text">{{selectedPoint.county}} {{selectedPoint.town}} {{selectedPoint.village}}</text>
        </view>
        <view class="point-stats" wx:if="{{selectedPoint.foundingYear}}">
          <text class="visit-count">å»ºæ‘å¹´ä»£: {{selectedPoint.foundingYear}}</text>
        </view>
      </view>
      <view class="action-buttons">
        <button class="btn-primary" bindtap="viewDetail" data-point="{{selectedPoint}}">æŸ¥çœ‹è¯¦æƒ…</button>
      </view>
    </view>
  </view>
  
  <!-- ä¸‹åŠéƒ¨åˆ†ï¼šæ‘è½åˆ—è¡¨ -->
  <view class="list-section">
    <view class="list-header">
      <view class="header-top">
        <text class="list-title">æ‘è½åˆ—è¡¨</text>
      </view>
      <view class="list-search">
        <input class="search-input" placeholder="æœç´¢æ‘è½" bindinput="searchPoints" value="{{searchKeyword}}" />
        <text class="search-icon">ğŸ”</text>
      </view>
    </view>
    

    
    <scroll-view class="list-content" scroll-y="true">
      <view class="list-empty" wx:if="{{filteredListPoints.length === 0}}">
        <text>æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ‘è½</text>
      </view>
      <view class="list-item" wx:for="{{filteredListPoints}}" wx:key="index" bindtap="selectListPoint" data-index="{{index}}">
        <view class="list-item-header">
          <text class="list-item-name">{{item.village}}</text>
          <text class="list-item-county">{{item.county}}</text>
        </view>
        <view class="list-item-info">
          <text class="list-item-town">{{item.town}}</text>
          <text class="list-item-type" wx:if="{{item.buildingForm}}">{{item.buildingForm}}</text>
        </view>
      </view>
    </scroll-view>
    
    <view class="list-footer">
      <text class="list-count">å…± {{filteredListPoints.length}} / {{allPoints.length}} ä¸ªæ‘è½</text>
    </view>
  </view>
  

</view>

